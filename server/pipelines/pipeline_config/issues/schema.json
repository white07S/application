{
  "data_source": "issues",
  "primary_key": "issue_id",
  "primary_key_pattern": "^ISSUE-\\d{10}$",
  "required_issue_types": ["Audit", "Self-Identified", "Regulatory", "Restricted Regulatory"],
  "columns": {
    "issue_id": {"type": "string", "required": true, "nullable": false, "pattern": "^ISSUE-\\d{10}$"},
    "issue_title": {"type": "string", "required": true, "nullable": false},
    "issue_type": {"type": "string", "required": true, "nullable": false, "allowed_values": ["Audit", "Self-Identified", "Regulatory", "Restricted Regulatory"]},
    "control_deficiency": {"type": "string", "required": true, "nullable": false},
    "root_cause": {"type": "string", "required": true, "nullable": false},
    "symptoms": {"type": "string", "required": true, "nullable": true},
    "risk_description": {"type": "string", "required": true, "nullable": false},
    "success_criteria": {"type": "string", "required": true, "nullable": false},
    "issue_status": {"type": "string", "required": true, "nullable": false, "allowed_values": ["Draft", "Open-Grace Period", "Open", "Completed", "Closed"]},
    "issue_rag_status": {"type": "string", "required": true, "nullable": false, "allowed_values": ["Red", "Amber", "Green"]},
    "issue_rag_justification": {"type": "string", "required": true, "nullable": true},
    "original_mitigation_date": {"type": "datetime", "required": true, "nullable": false},
    "current_mitigation_date": {"type": "datetime", "required": true, "nullable": false},
    "mitigation_date_change_count": {"type": "int", "required": false, "nullable": true},
    "open_action_plans": {"type": "int", "required": true, "nullable": false},
    "total_action_plans": {"type": "int", "required": true, "nullable": false},
    "severity_rating": {"type": "int", "required": true, "nullable": false, "allowed_values": [3, 4, 5]},
    "created_on": {"type": "datetime", "required": true, "nullable": false},
    "last_modified_on": {"type": "datetime", "required": true, "nullable": false},
    "group_id": {"type": "string", "required": true, "nullable": false},
    "division_name": {"type": "string", "required": true, "nullable": false},
    "function_name": {"type": "string", "required": true, "nullable": false},
    "country_name": {"type": "string", "required": true, "nullable": false},
    "issue_owner": {"type": "string", "required": true, "nullable": false},
    "issue_owner_gpn": {"type": "string", "required": true, "nullable": false, "pattern": "^\\d{8}$"}
  },
  "table_splits": {
    "issues_main": [
      "issue_id", "issue_title", "issue_type", "control_deficiency", "root_cause",
      "symptoms", "risk_description", "success_criteria", "issue_status",
      "issue_rag_status", "issue_rag_justification", "original_mitigation_date",
      "current_mitigation_date", "mitigation_date_change_count", "open_action_plans",
      "total_action_plans", "severity_rating", "created_on", "last_modified_on"
    ],
    "issues_audit": [
      "issue_id", "issue_owner", "issue_owner_gpn", "issue_administrator",
      "issue_administrator_gpn", "issue_delegate", "issue_delegate_gpn",
      "first_level_reviewer", "first_level_reviewer_gpn", "orc_reviewer",
      "orc_reviewer_gpn", "orc_articulation_check", "orc_rating_check",
      "orc_mitigation_date_check", "orc_action_plan_check", "orc_mapping_check",
      "regulatory_manager", "regulatory_manager_gpn", "regulator_country",
      "regulator_type", "audit_rating", "audit_report_id", "finding_id",
      "mra_mria", "dsori_program", "gsori_program", "eandy_relevant",
      "operating_committee", "reprioritization_risk_acceptance_justification",
      "risk_acceptance_approval_date", "category_flags", "draft_date",
      "open_grace_period_date", "open_date", "completed_date", "closed_date",
      "last_comment", "last_comment_date", "last_commenter", "last_commenter_gpn"
    ],
    "issues_hierarchy": [
      "issue_id", "group_id", "group_name", "division_id", "division_name",
      "unit_id", "unit_name", "area_id", "area_name", "sector_id", "sector_name",
      "segment_id", "segment_name", "function_id", "function_name",
      "l0_location_id", "l0_location_name", "region_id", "region_name",
      "sub_region_id", "sub_region_name", "country_id", "country_name",
      "company_id", "company_short_name"
    ]
  },
  "multi_value_splits": {
    "issues_related_functions": {
      "source_columns": ["related_function_ids", "related_function_names"],
      "pk_column": "issue_id",
      "value_columns": ["related_function_id", "related_function_name"]
    },
    "issues_related_locations": {
      "source_columns": ["related_location_ids", "related_location_names"],
      "pk_column": "issue_id",
      "value_columns": ["related_location_id", "related_location_name"]
    },
    "issues_controls": {
      "source_column": "linked_control_ids",
      "pk_column": "issue_id",
      "value_column": "control_id"
    },
    "issues_related_issues": {
      "source_column": "related_issue_ids",
      "pk_column": "issue_id",
      "value_column": "related_issue_id",
      "extra_columns": {"relationship_type": null}
    },
    "issues_risk_theme": {
      "source_column": "risk_themes",
      "pk_column": "issue_id",
      "value_column": "risk_theme",
      "lookup_taxonomy": true
    }
  }
}
