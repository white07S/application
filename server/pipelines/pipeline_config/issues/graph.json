{
  "data_source": "issues",
  "batch_size": 10,
  "max_retries": 3,
  "primary_key": "issue_id",
  "last_modified_column": "last_modified_on",
  "main_table": "dl_issues",
  "child_tables": [
    "dl_issues_hierarchy",
    "dl_issues_audit",
    "dl_issues_risk_themes",
    "dl_issues_related_functions",
    "dl_issues_related_locations",
    "dl_issues_controls",
    "dl_issues_related_issues"
  ],
  "parquet_mapping": {
    "dl_issues": "issues_main.parquet",
    "dl_issues_hierarchy": "issues_hierarchy.parquet",
    "dl_issues_audit": "issues_audit.parquet",
    "dl_issues_risk_themes": "issues_risk_theme.parquet",
    "dl_issues_related_functions": "issues_related_functions.parquet",
    "dl_issues_related_locations": "issues_related_locations.parquet",
    "dl_issues_controls": "issues_controls.parquet",
    "dl_issues_related_issues": "issues_related_issues.parquet"
  },
  "stages": [
    {
      "name": "insert_main",
      "type": "ingestion",
      "target": "main"
    },
    {
      "name": "insert_children",
      "type": "ingestion",
      "target": "children",
      "depends_on": ["insert_main"]
    },
    {
      "name": "nfr_taxonomy",
      "type": "model",
      "depends_on": ["insert_children"]
    },
    {
      "name": "enrichment",
      "type": "model",
      "depends_on": ["nfr_taxonomy"]
    },
    {
      "name": "embeddings",
      "type": "model",
      "depends_on": ["enrichment"]
    },
    {
      "name": "nested_embeddings",
      "type": "model",
      "source": "enrichment_output",
      "depends_on": ["enrichment"]
    }
  ]
}
